<tool id="anvi_import_misc_data" name="anvi-import-misc-data" version="5.2">
    <description>Populate additional data or order tables in pan or profile databases for                                                  items or layers (the Swiss army knife-level serious stuff).</description>
    <requirements>
        <requirement type="package" version="5.2">anvio</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <version_command>anvi-import-misc-data --version</version_command>
    <command><![CDATA[
        cp -R '${input_pan_or_profile_db.extra_files_path}' '${output_pan_or_profile_db.extra_files_path}'
 &&
 anvi-import-misc-data

#if $data_file:
     '${data_file}'
#end if


#if $output_pan_or_profile_db:
    --pan-or-profile-db '${output_pan_or_profile_db.extra_files_path}/${output_pan_or_profile_db.metadata.anvio_basename}'
#end if

--target-data-table '${target_data_table}'


#if $str( $target_data_group ):
    --target-data-group '${target_data_group}'
#end if

${transpose}

--just-do-it
&> '${GALAXY_ANVIO_LOG}'

    ]]></command>
    <inputs>
        <param name="data_file" type="data" label="Data File" format="tabular" optional="True" multiple="False" argument="" help='The input file that describes an additional data for layers or items. The expected format of this file depends on the data table you will target. This can feel complicated, but we promise it is not (you probably have a PhD or working on one, so trust us when we say "it is not complicated"). You need to read the online documentation if this is your first time with this.'/>
        <param name="input_pan_or_profile_db" type="data" label="Pan Or Profile Db" format="anvio_profile_db,anvio_pan_db" optional="False" multiple="False" argument="--pan-or-profile-db" help="Anvi'o pan or profile database (and even genes database in appropriate contexts)."/>
        <param name="target_data_table" type="text" label="Target Data Table" value="" optional="False" argument="--target-data-table" help="The target table is the table you are interested in accessing. Currently it can be 'items','layers', or 'layer_orders'. Please see most up-to-date online documentation for more information."/>
        <param name="target_data_group" type="text" label="Target Data Group" value="" optional="True" argument="--target-data-group" help="Data group to focus. Anvi'o misc data tables support associating a set of data keys with a data group. If you have no idea what this is, then probably you don't need it, and anvi'o will take care of you. Note: this flag is IRRELEVANT if you are working with additioanl order data tables."/>
        <param name="transpose" type="boolean" label="Transpose" truevalue="--transpose" falsevalue="" checked="False" optional="True" argument="--transpose" help="Transpose the input matrix file before clustering."/>
    </inputs>
    <outputs>
        <data name="output_pan_or_profile_db" format="anvio_profile_db" format_source="input_pan_or_profile_db" metadata_source="input_pan_or_profile_db" label="${tool.name} on ${on_string}: Pan Or Profile Db"/>
        <data name="GALAXY_ANVIO_LOG" format="txt" label="${tool.name} on ${on_string}: Log"/>
    </outputs>
    <help><![CDATA[
        usage: anvi-import-misc-data [-h] -p PAN_OR_PROFILE_DB -t NAME [-D NAME]
                              [--transpose] [--just-do-it]
                              TAB DELIMITED FILE

Populate additional data or order tables in pan or profile databases for items
or layers (the Swiss army knife-level serious stuff).

positional arguments:
  TAB DELIMITED FILE    The input file that describes an additional data for
                        layers or items. The expected format of this file
                        depends on the data table you will target. This can
                        feel complicated, but we promise it is not (you
                        probably have a PhD or working on one, so trust us
                        when we say "it is not complicated"). You need to read
                        the online documentation if this is your first time
                        with this.

optional arguments:
  -h, --help            show this help message and exit
  -p PAN_OR_PROFILE_DB, --pan-or-profile-db PAN_OR_PROFILE_DB
                        Anvi'o pan or profile database (and even genes
                        database in appropriate contexts).
  -t NAME, --target-data-table NAME
                        The target table is the table you are interested in
                        accessing. Currently it can be 'items','layers', or
                        'layer_orders'. Please see most up-to-date online
                        documentation for more information.
  -D NAME, --target-data-group NAME
                        Data group to focus. Anvi'o misc data tables support
                        associating a set of data keys with a data group. If
                        you have no idea what this is, then probably you don't
                        need it, and anvi'o will take care of you. Note: this
                        flag is IRRELEVANT if you are working with additioanl
                        order data tables.
  --transpose           Transpose the input matrix file before clustering.
  --just-do-it          Don't bother me with questions or warnings, just do
                        it.

    ]]></help>
    <citations>
        <citation type="doi">10.7717/peerj.1319</citation>
        <citation type="bibtex">@ARTICLE{Blankenberg19-anvio,
   author = {Daniel Blankenberg, et al},
   title = {In preparation..},
   }</citation>
    </citations>
</tool>