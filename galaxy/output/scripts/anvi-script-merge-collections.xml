<tool id="anvi_script_merge_collections" name="anvi-script-merge-collections" version="5.2">
    <description>Generate an additional data file from multiple collections.</description>
    <requirements>
        <requirement type="package" version="5.2">anvio</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <version_command>anvi-script-merge-collections --version</version_command>
    <command><![CDATA[
        cp -R '${input_contigs_db.extra_files_path}' '${output_contigs_db.extra_files_path}'
 &&
 anvi-script-merge-collections
--contigs-db '${output_contigs_db.extra_files_path}/CONTIGS.db'

--input-files '${input_files}'

--output-file '${output_file}'

&> '${GALAXY_ANVIO_LOG}'

 &&
ls -lahR
    ]]></command>
    <inputs>
        <param name="input_contigs_db" type="data" label="Contigs Db" format="anvio_contigs_db" optional="False" multiple="False" argument="--contigs-db" help="Anvi'o contigs database generated by 'anvi-gen-contigs'"/>
        <param name="input_files" type="data" label="Input Files" format="data" optional="False" multiple="True" argument="--input-files" help="Input file(s). TAB-delimited input files should have two columns, where the first column holds the contig name, and the second one the bin id. This is the standard ouptut of the program anvi-export-collection."/>
    </inputs>
    <outputs>
        <data name="output_contigs_db" format="anvio_contigs_db" format_source="input_contigs_db" metadata_source="input_contigs_db" label="${tool.name} on ${on_string}: Contigs Db"/>
        
        <data name="GALAXY_ANVIO_LOG" format="txt" label="${tool.name} on ${on_string}: Log"/>
    </outputs>
    <help><![CDATA[
        usage: anvi-script-merge-collections [-h] -c CONTIGS_DB -i FILES) [FILE(S ...] -o
                              OUTPUT_FILE

Generate an additional data file from multiple collections.

optional arguments:
  -h, --help            show this help message and exit
  -c CONTIGS_DB, --contigs-db CONTIGS_DB
                        Anvi'o contigs database generated by 'anvi-gen-
                        contigs'
  -i FILE(S) [FILE(S) ...], --input-files FILE(S) [FILE(S) ...]
                        Input file(s). TAB-delimited input files should have
                        two columns, where the first column holds the contig
                        name, and the second one the bin id. This is the
                        standard ouptut of the program anvi-export-collection.
  -o OUTPUT_FILE, --output-file OUTPUT_FILE
                        Output file name.

    ]]></help>
    <citations>
        <citation type="doi">10.7717/peerj.1319</citation>
    </citations>
</tool>