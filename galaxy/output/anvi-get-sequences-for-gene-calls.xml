<tool id="anvi_get_sequences_for_gene_calls" name="anvi-get-sequences-for-gene-calls" version="5.3">
    <description>A script to get back sequences of a list of genes</description>
    <requirements>
        <requirement type="package" version="5.3">anvio</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <version_command>anvi-get-sequences-for-gene-calls --version</version_command>
    <command><![CDATA[
        cp -R '${input_contigs_db.extra_files_path}' '${output_contigs_db.extra_files_path}'
 &&
 anvi-get-sequences-for-gene-calls
--contigs-db '${output_contigs_db.extra_files_path}/CONTIGS.db'


#if $str( $gene_caller_ids ):
    --gene-caller-ids '${gene_caller_ids}'
#end if

--output-file '${output_file}'


#if $str( $delimiter ):
    --delimiter '${delimiter}'
#end if

${report_extended_deflines}


#if $str( $wrap ):
    --wrap '${wrap}'
#end if

${export_gff3}

${get_aa_sequences}

&> '${GALAXY_ANVIO_LOG}'

    ]]></command>
    <inputs>
        <param name="input_contigs_db" type="data" label="Contigs Db" format="anvio_contigs_db" optional="False" multiple="False" argument="--contigs-db" help="Anvi'o contigs database generated by 'anvi-gen-contigs'"/>
        <param name="gene_caller_ids" type="text" label="Gene Caller Ids" value="" optional="True" argument="--gene-caller-ids" help="Gene caller ids. Multiple of them can be declared separated by a delimiter (the default is a comma). In anvi-gen-variability-profile, if you declare nothing you will get all genes matching your other filtering criteria. In other programs, you may get everything, nothing, or an error. It really depends on the situation. Fortunately mistakes are cheap, so it's worth a try."/>
        <param name="delimiter" type="text" label="Delimiter" value="," optional="True" argument="--delimiter" help="The delimiter to parse multiple input terms. The default is '%(default)s'."/>
        <param name="report_extended_deflines" type="boolean" label="Report Extended Deflines" truevalue="--report-extended-deflines" falsevalue="" checked="False" optional="True" argument="--report-extended-deflines" help="When declared, the deflines in the resulting FASTA file will contain more information."/>
        <param name="wrap" type="integer" label="Wrap" value="120" optional="True" argument="--wrap" help="When to wrap sequences when storing them in a FASTA file. The default is '%(default)d'. A value of '0' would be equivalent to 'do not wrap'."/>
        <param name="export_gff3" type="boolean" label="Export Gff3" truevalue="--export-gff3" falsevalue="" checked="False" optional="True" argument="--export-gff3" help="If this is true, the output file will be in GFF3 format."/>
        <param name="get_aa_sequences" type="boolean" label="Get Aa Sequences" truevalue="--get-aa-sequences" falsevalue="" checked="False" optional="True" argument="--get-aa-sequences" help="Store amino acid sequences instead."/>
    </inputs>
    <outputs>
        <data name="output_contigs_db" format="anvio_contigs_db" format_source="input_contigs_db" metadata_source="input_contigs_db" label="${tool.name} on ${on_string}: Contigs Db"/>
        <data name="output_file" format="txt" format_source="input_output_file" metadata_source="input_output_file" label="${tool.name} on ${on_string}: Output File"/>
        <data name="GALAXY_ANVIO_LOG" format="txt" label="${tool.name} on ${on_string}: Log"/>
    </outputs>
    <help><![CDATA[
        usage: anvi-get-sequences-for-gene-calls [-h] -c CONTIGS_DB
                              [--gene-caller-ids GENE_CALLER_IDS] -o FILE_PATH
                              [--delimiter CHAR] [--report-extended-deflines]
                              [--wrap WRAP] [--export-gff3]
                              [--get-aa-sequences]

A script to get back sequences of a list of genes

optional arguments:
  -h, --help            show this help message and exit
  -c CONTIGS_DB, --contigs-db CONTIGS_DB
                        Anvi'o contigs database generated by 'anvi-gen-
                        contigs'
  --gene-caller-ids GENE_CALLER_IDS
                        Gene caller ids. Multiple of them can be declared
                        separated by a delimiter (the default is a comma). In
                        anvi-gen-variability-profile, if you declare nothing
                        you will get all genes matching your other filtering
                        criteria. In other programs, you may get everything,
                        nothing, or an error. It really depends on the
                        situation. Fortunately mistakes are cheap, so it's
                        worth a try.
  -o FILE_PATH, --output-file FILE_PATH
                        File path to store results.
  --delimiter CHAR      The delimiter to parse multiple input terms. The
                        default is ','.
  --report-extended-deflines
                        When declared, the deflines in the resulting FASTA
                        file will contain more information.
  --wrap WRAP           When to wrap sequences when storing them in a FASTA
                        file. The default is '120'. A value of '0' would be
                        equivalent to 'do not wrap'.
  --export-gff3         If this is true, the output file will be in GFF3
                        format.
  --get-aa-sequences    Store amino acid sequences instead.

    ]]></help>
    <citations>
        <citation type="doi">10.7717/peerj.1319</citation>
        <citation type="bibtex">@ARTICLE{Blankenberg19-anvio,
   author = {Daniel Blankenberg, et al},
   title = {In preparation..},
   }</citation>
    </citations>
</tool>