<tool id="anvi_saavs_and_protein_structures_summary" name="anvi-saavs-and-protein-structures-summary" version="5.3.0">
    <description>Generate a static web site for SAAVs and protein structures.</description>
    <requirements>
        <requirement type="package" version="5.3.0">anvio</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <version_command>anvi-saavs-and-protein-structures-summary --version</version_command>
    <command><![CDATA[
        
    #if $input_contigs_db:
        cp -R '${input_contigs_db.extra_files_path}' '${output_contigs_db.extra_files_path}'
    #else
        echo ''
    #end if
 &&
 anvi-saavs-and-protein-structures-summary
--contigs-db '${output_contigs_db.extra_files_path}/CONTIGS.db'


#if $genes:
    --genes '${genes}'
#end if


#if $samples:
    --samples '${samples}'
#end if


#if $input_dir:
    --input-dir '${input_dir.extra_files_path}'
#end if


#if $output_dir:
    --output-dir '${output_dir.extra_files_path}'
#end if

${soft_link_images}


#if $str( $perspectives ):
    --perspectives '${perspectives}'
#end if

&> '${GALAXY_ANVIO_LOG}'

    ]]></command>
    <inputs>
        <param name="input_contigs_db" type="data" label="Contigs Db" format="anvio_contigs_db" optional="True" multiple="False" argument="--contigs-db" help="Anvi'o contigs database generated by 'anvi-gen-contigs'"/>
        <param name="genes" type="data" label="Genes" format="txt" optional="True" multiple="False" argument="--genes" help="Genes file."/>
        <param name="samples" type="data" label="Samples" format="txt" optional="True" multiple="False" argument="--samples" help="Samples file."/>
        <param name="input_dir" type="data" label="Input Dir" format="anvio_profile_db" optional="False" multiple="False" argument="--input-dir" help="Directory path for input files"/>
        <param name="soft_link_images" type="boolean" label="Soft Link Images" truevalue="--soft-link-images" falsevalue="" checked="False" optional="True" argument="--soft-link-images" help="By default, your imaeges will be copied in the output directory to create a fully self-contained output (so you can send it to your colleagues and they would have everything they need to browse the output). Alternatively you can use this flag to avoid copying images in the output directory (it would make the output less portable, but it would take less time and space to generate it)."/>
        <param name="perspectives" type="text" label="Perspectives" value="" optional="True" argument="--perspectives" help="By default anvi'o will use each perspective found in the data directory to create an HTML output. Using this parameter you can limit perspectives to the ones you are interested in by defining them as a commma-separated list. If you make a mistake anvi'o will tell you what are the available perspectives, so don't worry."/>
    </inputs>
    <outputs>
        <data name="output_contigs_db" format="anvio_contigs_db" format_source="input_contigs_db" metadata_source="input_contigs_db" label="${tool.name} on ${on_string}: Contigs Db"/>
        <data name="output_dir" format="anvio_profile_db" format_source="input_output_dir" metadata_source="input_output_dir" label="${tool.name} on ${on_string}: Output Dir"/>
        <data name="GALAXY_ANVIO_LOG" format="txt" label="${tool.name} on ${on_string}: Log"/>
    </outputs>
    <help><![CDATA[
        usage: anvi-saavs-and-protein-structures-summary [-h] [-c CONTIGS_DB] [--genes FILE]
                              [--samples FILE] -i DIR_PATH -o DIR_PATH
                              [--soft-link-images]
                              [--perspectives PERSPECTIVES]

Generate a static web site for SAAVs and protein structures.

optional arguments:
  -h, --help            show this help message and exit
  -c CONTIGS_DB, --contigs-db CONTIGS_DB
                        Anvi'o contigs database generated by 'anvi-gen-
                        contigs'
  --genes FILE          Genes file.
  --samples FILE        Samples file.
  -i DIR_PATH, --input-dir DIR_PATH
                        Directory path for input files
  -o DIR_PATH, --output-dir DIR_PATH
                        Directory path for output files
  --soft-link-images    By default, your imaeges will be copied in the output
                        directory to create a fully self-contained output (so
                        you can send it to your colleagues and they would have
                        everything they need to browse the output).
                        Alternatively you can use this flag to avoid copying
                        images in the output directory (it would make the
                        output less portable, but it would take less time and
                        space to generate it).
  --perspectives PERSPECTIVES
                        By default anvi'o will use each perspective found in
                        the data directory to create an HTML output. Using
                        this parameter you can limit perspectives to the ones
                        you are interested in by defining them as a commma-
                        separated list. If you make a mistake anvi'o will tell
                        you what are the available perspectives, so don't
                        worry.

CONTIGS DB:
  If you provide a contigs database, anvi'o will findout about functions and
  other properties of genes using the contigs database. This is supposed to
  be the contigs database you used to generate variability profile for this
  project like 2 years ago. Yeah. Time goes by :/

WHAT SHOULD BE PROCESSED:
  By default, anvi'o will learn about the genes and samples you have from
  the input data directory. If you want to overwrite that information (i.e.
  to work with a smaller set of genes or samples), you can come up with your
  own files.

INPUT/OUTPUT:
  Read from here, write to there.

ADDITIONAL STUFF:
  Little conveniences.

    ]]></help>
    <citations>
        <citation type="doi">10.7717/peerj.1319</citation>
        <citation type="bibtex">@ARTICLE{Blankenberg19-anvio,
   author = {Daniel Blankenberg, et al},
   title = {In preparation..},
   }</citation>
    </citations>
</tool>